"use strict";function clearElement(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function fillCharSelect(){var a=document.getElementById("combobox_chars");clearElement(a),mkmovelist.chars.forEach(function(b){var c=document.createElement("OPTION");c.textContent=b.displayname,a.appendChild(c)})}function killSelf(){this.parentNode.removeChild(this)}function replaceInputStyle(a){var b=document.getElementById("btn_fp").value,c=document.getElementById("btn_bp").value,d=document.getElementById("btn_fk").value,e=document.getElementById("btn_bk").value,f=document.getElementById("btn_down").value,g=document.getElementById("btn_up").value,h=document.getElementById("btn_back").value,i=document.getElementById("btn_towards").value,j=document.getElementById("btn_int").value,k=document.getElementById("btn_flip").value,l=document.getElementById("btn_thr").value,m=document.getElementById("btn_blk").value,n=a;return n=n.replace(/\[FP\]/g,b+" "),n=n.replace(/\[BP\]/g,c+" "),n=n.replace(/\[FK\]/g,d+" "),n=n.replace(/\[BK\]/g,e+" "),n=n.replace(/\[Up\]/g,g+" "),n=n.replace(/\[Down\]/g,f+" "),n=n.replace(/\[Away\]/g,h+" "),n=n.replace(/\[Towards\]/g,i+" "),n=n.replace(/\[TowardsUp\]/g,"("+i+"+"+g+") "),n=n.replace(/\[TowardsDown\]/g,"("+i+"+"+f+") "),n=n.replace(/\[AwayUp\]/g,"("+h+"+"+g+") "),n=n.replace(/\[AwayDown\]/g,"("+h+"+"+f+") "),n=n.replace(/\[R2\]/g,m+" "),n=n.replace(/\[L2\]/g,k+" "),n=n.replace(/\[R1\]/g,j+" "),n=n.replace(/\[L1\]/g,l+" "),n=n.replace(/\[,\]/g,", "),n=n.replace(/\[\+\]/g," + ")}function buildMoveRow(a,b){var c=document.createElement("DIV");c.className="row",c.style.cursor="pointer",c.style["border-bottom"]="1px grey solid";var d=document.createElement("SPAN");d.className="col-xs-4 col-md-4",d.textContent=a;var e=document.createElement("SPAN");return e.className="col-xs-8 col-md-8",e.style["font-weight"]="bold",e.innerHTML=replaceInputStyle(b),c.appendChild(d),c.appendChild(e),c.onclick=killSelf,c}function buildInfoRow(a){var b=document.createElement("DIV");b.className="row",b.style.cursor="pointer";var c=document.createElement("DIV");return c.className="col-xs-12 col-md-12 small",a=replaceInputStyle(a),c.innerHTML=a.replace(/(?:\r\n|\r|\n)/g,"<br />"),b.appendChild(c),b.onclick=killSelf,b}function buildHeader(a){var b=document.createElement("H4");return b.textContent=a,b.onclick=killSelf,b.style.cursor="pointer",b}function clearMoveList(){document.getElementById("header_charname").textContent="";var a=document.getElementById("div_normals"),b=document.getElementById("div_combos"),c=document.getElementById("div_specials"),d=document.getElementById("div_variations"),e=document.getElementById("div_fatalities"),f=document.getElementById("div_brutalities");clearElement(a),clearElement(b),clearElement(c),clearElement(d),clearElement(e),clearElement(f)}function printChar(){console.log("printing chars!");var a=document.getElementById("combobox_chars").value;document.getElementById("header_charname").textContent=a;var b={};mkmovelist.chars.forEach(function(c){a===c.displayname&&(b=c)});var c=document.getElementById("div_normals"),d=document.getElementById("div_combos"),e=document.getElementById("div_specials"),f=document.getElementById("div_variations"),g=document.getElementById("div_fatalities"),h=document.getElementById("div_brutalities");clearElement(c),clearElement(d),clearElement(e),clearElement(f),clearElement(g),clearElement(h),c.appendChild(buildHeader("Normals")),d.appendChild(buildHeader("Combos")),e.appendChild(buildHeader("Specials")),b.moves.forEach(function(a){"normal"===a.type?c.appendChild(buildMoveRow(a.movename,a.input)):"combo"===a.type?d.appendChild(buildMoveRow(a.movename,a.input)):"special"===a.type&&e.appendChild(buildMoveRow(a.movename,a.input))}),b.traits.forEach(function(a){f.appendChild(buildHeader("Variation - "+a.traitname)),a.moves.forEach(function(a){f.appendChild(buildMoveRow(a.movename,a.input))})}),g.appendChild(buildHeader("Fatalities")),h.appendChild(buildHeader("Brutalities")),b.fatalities.forEach(function(a){"fatality"===a.type?(g.appendChild(buildMoveRow(a.movename,a.input)),g.appendChild(buildInfoRow(a.info))):"brutality"===a.type&&(h.appendChild(buildMoveRow(a.movename,a.input)),h.appendChild(buildInfoRow(a.info)))})}function showCurrentLang(a){document.getElementById("current_lang").textContent=a.toUpperCase()}function loadChars(a){function b(a){mkmovelist.chars=a}var c="json/mkmovelist."+a+".json";$.ajax({url:c,async:!1,dataType:"json",success:b}),clearMoveList(),fillCharSelect(),showCurrentLang(a)}var mkmovelist={};$(document).ready(function(){console.log("ready!"),loadChars("eng")});